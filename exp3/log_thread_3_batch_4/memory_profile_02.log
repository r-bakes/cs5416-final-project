============================================================
EMBEDDING SERVICE
============================================================
Node: 0
Port: 8002
Model: BAAI/bge-base-en-v1.5
============================================================
 * Serving Flask app '01_embedding_service'
 * Debug mode: off
============================================================
EMBEDDING SERVICE
============================================================
Node: 0
Port: 8002
Model: BAAI/bge-base-en-v1.5
============================================================
 * Serving Flask app '01_embedding_service'
 * Debug mode: off
============================================================
EMBEDDING SERVICE
============================================================
Node: 0
Port: 8002
Model: BAAI/bge-base-en-v1.5
============================================================
 * Serving Flask app '01_embedding_service'
 * Debug mode: off
============================================================
EMBEDDING SERVICE
============================================================
Node: 0
Port: 9002
Model: BAAI/bge-base-en-v1.5
============================================================
 * Serving Flask app '01_embedding_service'
 * Debug mode: off

[TIMING] _generate_embeddings_batch - START
Filename: /home/yy2394/cs5416-final-project/exp3/01_embedding_service.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
    21    659.5 MiB    659.5 MiB           1   @profile_with_timing
    22                                         @profile
    23                                         def _generate_embeddings_batch(texts: list[str]) -> np.ndarray:
    24                                             """Step 2: Generate embeddings for a batch of queries"""
    25   1003.9 MiB    344.4 MiB           1       embeddings = model.encode(texts, normalize_embeddings=True, convert_to_numpy=True)
    26   1003.9 MiB      0.0 MiB           1       gc.collect()
    27   1003.9 MiB      0.0 MiB           1       return embeddings


[TIMING] _generate_embeddings_batch - END (took 3.17s)

[TIMING] _generate_embeddings_batch - START
Filename: /home/yy2394/cs5416-final-project/exp3/01_embedding_service.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
    21   1008.8 MiB   1008.8 MiB           1   @profile_with_timing
    22                                         @profile
    23                                         def _generate_embeddings_batch(texts: list[str]) -> np.ndarray:
    24                                             """Step 2: Generate embeddings for a batch of queries"""
    25   1011.8 MiB      3.0 MiB           1       embeddings = model.encode(texts, normalize_embeddings=True, convert_to_numpy=True)
    26   1011.8 MiB      0.0 MiB           1       gc.collect()
    27   1011.8 MiB      0.0 MiB           1       return embeddings


[TIMING] _generate_embeddings_batch - END (took 0.29s)

[TIMING] _generate_embeddings_batch - START
Filename: /home/yy2394/cs5416-final-project/exp3/01_embedding_service.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
    21    985.2 MiB    985.2 MiB           1   @profile_with_timing
    22                                         @profile
    23                                         def _generate_embeddings_batch(texts: list[str]) -> np.ndarray:
    24                                             """Step 2: Generate embeddings for a batch of queries"""
    25    985.7 MiB      0.5 MiB           1       embeddings = model.encode(texts, normalize_embeddings=True, convert_to_numpy=True)
    26    985.7 MiB      0.0 MiB           1       gc.collect()
    27    985.7 MiB      0.0 MiB           1       return embeddings


[TIMING] _generate_embeddings_batch - END (took 2.66s)

[TIMING] _generate_embeddings_batch - START
Filename: /home/yy2394/cs5416-final-project/exp3/01_embedding_service.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
    21    986.1 MiB    986.1 MiB           1   @profile_with_timing
    22                                         @profile
    23                                         def _generate_embeddings_batch(texts: list[str]) -> np.ndarray:
    24                                             """Step 2: Generate embeddings for a batch of queries"""
    25    986.1 MiB      0.0 MiB           1       embeddings = model.encode(texts, normalize_embeddings=True, convert_to_numpy=True)
    26    986.1 MiB      0.0 MiB           1       gc.collect()
    27    986.1 MiB      0.0 MiB           1       return embeddings


[TIMING] _generate_embeddings_batch - END (took 1.13s)
